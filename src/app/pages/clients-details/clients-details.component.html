<p-overlayPanel
  #reportsFilter
  [showCloseIcon]="true"
  [style]="{ width: '75%' }">
  <ng-template pTemplate>
    <form [formGroup]="filterForm">
      <div class="container-fluid mt-2">
        <div class="grid p-fluid">
          <div class="col-12 md:col-4">
            <label class="model-label model-label-form">Date Time Option</label>
            <p-dropdown
              [options]="dateTimeOptions"
              appendTo="body"
              optionLabel="label"
              optionValue="value"
              formControlName="datetTimeOptions"></p-dropdown>
          </div>

          <div class="col-12 md:col-4">
            <label class="model-label model-label-form">From Date</label>
            <p-calendar
              appendTo="body"
              dateFormat="yy-mm-dd"
              formControlName="fromDate"
              [showSeconds]="true"
              appendTo="body"
              class="mr-1"
              dateFormat="yy-mm-dd"
              styleClass="{'width':'100%'}"
              placeholder="From Date">
            </p-calendar>
          </div>

          <div class="col-12 md:col-4">
            <label class="model-label model-label-form">To Date</label>
            <p-calendar
              appendTo="body"
              dateFormat="yy-mm-dd"
              formControlName="toDate"
              [showSeconds]="true"
              appendTo="body"
              class="mr-1"
              dateFormat="yy-mm-dd"
              styleClass="{'width':'100%'}"
              placeholder="To Date">
            </p-calendar>
          </div>
           <div class="col-12 md:col-4">
            <label class="model-label model-label-form">Clients</label>
            <p-multiSelect
              appendTo="body"
              formControlName="plan"
              [defaultLabel]="'Clients'"
              display="chip"
              optionLabel="client_name"
              [options]="clientsList$|async"
              optionValue="id">
            </p-multiSelect>
          </div>

          <div class="field col-12 md:col-4">
            <label class="model-label model-label-form">Business Type</label>
            <p-multiSelect
              [options]="allBusinessTypes$|async"
              [defaultLabel]="'Business type'"
              optionLabel="name"
              optionValue="id"
              formControlName="businessType">
            </p-multiSelect>
          </div>

          <div class="col-12 md:col-4">
            <label class="model-label model-label-form">Tag</label>
            <p-multiSelect
              appendTo="body"
              formControlName="tag"
              [defaultLabel]="'Tag'"
              optionLabel="name"
              display="chip"
              [options]="allMainTags$|async"
              optionValue="id">
            </p-multiSelect>
          </div>
          <div class="col-12 md:col-4">
            <label class="model-label model-label-form">Sub Tag</label>
            <p-multiSelect
              appendTo="body"
              formControlName="subTag"
             [defaultLabel]="'Sub Tag'"
              [options]="subTags$|async"
              optionValue="name">
            </p-multiSelect>
          </div>
          <div class="col-12 md:col-4">
            <label class="model-label model-label-form">Plan</label>
            <p-multiSelect
              appendTo="body"
              formControlName="plan"
              [defaultLabel]="'Plans'"
              display="chip"
              optionLabel="plan_name"
              [options]="allPlans$|async"
              optionValue="plan_id">
            </p-multiSelect>
          </div>
          <div class="col-12 md:col-4">
            <label class="model-label model-label-form">Country</label>
            <p-multiSelect
              formControlName="country"
              [options]="allCounties$|async"
              [placeholder]="'Country'"
              optionLabel="name">
            </p-multiSelect>
          </div>

          <div class="col-12 md:col-4">
            <label class="model-label model-label-form"
              >Subscription Type</label
            >
            <p-dropdown
              formControlName="subscriptionType"
              [options]="subscription"
              [placeholder]="'Subscription Type'"
              optionLabel="">
            </p-dropdown>
          </div>

          <div class="col-12 md:col-4">
            <label class="model-label model-label-form">Creation Date</label>
            <p-calendar
            appendTo="body"
            formControlName="creationDate"
            formControlName="toDate"
            [showSeconds]="true"
            class="mr-1"
            dateFormat="yy-mm-dd"
            styleClass="{'width':'100%'}"
            placeholder="Creation Date">
          </p-calendar>
        </div>
        <div class="col-12 md:col-4">
          <label class="model-label model-label-form">Activation Date</label>
          <p-calendar
          appendTo="body"
          formControlName="activationDate"
          dateFormat="yy-mm-dd"
          [showSeconds]="true"
          class="mr-1"
          dateFormat="yy-mm-dd"
          styleClass="{'width':'100%'}"
          placeholder="Activation Date">
        </p-calendar>
      </div>
      <div class="col-12 md:col-4">
        <label class="model-label model-label-form">Expiry Date</label>
        <p-calendar
          appendTo="body"
          formControlName="expiryDate"
          dateFormat="yy-mm-dd"
          [showSeconds]="true"
          class="mr-1"
          dateFormat="yy-mm-dd"
          styleClass="{'width':'100%'}"
          placeholder="Expiry Date">
        </p-calendar>
      </div>
      <div class="col-12 md:col-4">
            <label class="model-label model-label-form">Code</label>
            <input
              pInputText
              type="text"
              formControlName="code"
              placeholder="Code" />
          </div>
        </div>
      </div>
      <div class="grid p-fluid mb-2 mt-2">
        <div class="col-12 md:col-12 flex justify-content-center">
          <div class="absolute bottom-0 p-2">
            <span class="p-buttonset">
              <p-button
                icon="pi pi-times"
                (onClick)="reportsFilter.hide()"
                styleClass="p-button-danger"
                [label]="'Reset'">
              </p-button>
              <p-button
                [label]="'Filter'"
                (onClick)="reportsFilter.hide()"
                type="button"
                icon="pi pi-filter"
                styleClass="p-button-primary">
              </p-button>
            </span>
          </div>
        </div>
      </div>
    </form>
  </ng-template>
</p-overlayPanel>

<div class="grid">
  <div class="col-12">
    <p-toolbar styleClass="mb-1 p-2">
      <div class="p-toolbar-group-left">
        <button
          pButton
          pRipple
          type="button"
          [label]="'Filter'"
          icon="pi pi-search"
          class=""
          (click)="reportsFilter.toggle($event)"></button>
      </div>
    </p-toolbar>
    <div class="card">
      <!-- <smart-table [data]="clientsList$|async" [columns]="tableCols" [title]="tableTitle"></smart-table> -->
    <p-table  [paginator]="true"  lazyMode="true" lazy="true" [rows]="10"
    [totalRecords]="" [rowsPerPageOptions]="[10,20,50,100,500]"
    currentPageReportTemplate="" [showCurrentPageReport]="true" #dt
    [value]="clientsDetails$|async" dataKey="stock_id"
    [resizableColumns]="true" [autoLayout]="true" styleClass="p-datatable-sm p-datatable-striped" [scrollable]="true"
    scrollHeight="400px">
     <ng-template pTemplate="caption">
        <div class="flex justify-content-between flex-column sm:flex-row">
            <ng-container>{{tableTitle}}</ng-container>
        </div>
    </ng-template>
 <ng-template pTemplate="header" let columns>
        <tr >
            <th *ngFor="let col of tableCols">{{col.header}}</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData>
        <tr >
          <td>{{rowData.client?.id}}</td>
          <td>{{rowData.client?.client?.client_name}}</td>
          <td>{{rowData.client?.mobile}}</td>
          <td>Email</td>
          <td>Business name</td>
          <td>Code</td>
          <td>
              <button type="button" pButton pRipple
                  class="p-button-text p-button-rounded p-button-plain"
                  [icon]="'pi pi-chevron-right'"></button>
          </td>
            <td>{{rowData.branchesNumber}}</td>
            <td>{{rowData.deviceNumber}}</td>
        </tr>
    </ng-template>
    </p-table>
    </div>
  </div>
</div>
